METHOD update_plan_values.
  " Fetch the available budget for the specified WBS element (POSID)
  SELECT SINGLE approved_budget 
    FROM ZTB_A2R_WBSITEM 
    WHERE posid = @iv_posid
    INTO @DATA(lv_available_budget).

  " Check if the plan value exceeds the available budget
  IF iv_plan_value > lv_available_budget.
    MESSAGE 'Plan value exceeds available budget' TYPE 'E'.
  ENDIF.

  " Update the plan values in the WBSITEM table
  UPDATE ZTB_A2R_WBSITEM 
    SET approved_budget = iv_plan_value
    WHERE posid = @iv_posid.

  COMMIT WORK.
ENDMETHOD.