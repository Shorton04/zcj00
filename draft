METHOD create_project.
  " Generate Request Number
  CALL FUNCTION 'NUMBER_GET_NEXT'
    EXPORTING
      nr_range_nr = '01'
      object = 'ZCJ00_REQN'
    IMPORTING
      number = lv_req_no.

  " Create Project Header Entry
  INSERT INTO ZTB_A2R_WBSHDR (pspnr, request, status, bukrs, werks, plsez)
    VALUES (iv_pspnr, lv_req_no, 'Draft', iv_bukrs, iv_werks, iv_plsez).

  " Create WBS Elements
  LOOP AT lt_wbs_elements INTO DATA(ls_wbs).
    INSERT INTO ZTB_A2R_WBSITEM (pspnr, posid, description, zbudget_check)
      VALUES (iv_pspnr, ls_wbs-posid, ls_wbs-description, ls_wbs-zbudget_check).
  ENDLOOP.

  COMMIT WORK.
  MESSAGE 'Project created successfully' TYPE 'S'.
ENDMETHOD.